{"version":3,"sources":["components/Preview.module.scss","components/Viewer.module.scss","components/App.module.scss","components/BigIcon.module.scss","config.js","components/GlobalSpinner.module.scss","components/Browser.module.scss","components/BrowserItem.module.scss","hooks/useXRSession.js","components/ViewerButton.module.scss","components/BBCode.module.scss","paths.js","hooks/useQueryShaderList.js","hooks/useQueryShader.js","icons/eye.svg","icons/heart.svg","icons/spinner.svg","icons/play.svg","icons/stop.svg","icons/exclamation.svg","components/Preview.jsx","components/BrowserItem.jsx","hooks/useScrollToTopOnMount.js","icons/empty.svg","components/BigIcon.jsx","components/GlobalSpinner.jsx","components/Browser.jsx","gl/shader/frag.js","gl/gl-util.js","shadertoy/misc.js","gl/shader/index.js","gl/shader/vert.js","gl/quad.js","shadertoy/Timing.js","shadertoy/Mouse.js","gl/TextureCube.js","gl/Texture2D.js","gl/Texture2DImage.js","gl/Texture2DVideo.js","gl/scene.js","components/ViewerButton.jsx","shadertoy/bbcode.js","components/BBCode.jsx","components/Viewer.jsx","shadertoy/flags.js","components/Error404.jsx","components/App.jsx","reportWebVitals.js","index.js"],"names":["module","exports","APP_KEY","require","useState","useEffect","useRef","useCallback","xr","navigator","useXRSession","createDrawScene","isSupported","setIsSupported","isSessionSupported","then","xrSession","isStarting","setIsStarting","isRunning","setIsRunning","stop","current","end","start","a","requestSession","requiredFeatures","onXRSessionEnded","addEventListener","canvas","document","createElement","gl","getContext","xrCompatible","drawScene","updateRenderState","baseLayer","global","XRWebGLLayer","requestReferenceSpace","xrRefSpace","drawXR","time","frame","session","requestAnimationFrame","isAvailable","BROWSER_PATH","VIEW_PATH","SHADERTOY_PREVIEW_PATH","usePaginatedQuery","useQueryShader","id","useQuery","controller","AbortController","signal","promise","fetch","res","json","cancel","abort","refetchOnWindowFocus","keepPreviousData","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","stroke","d","SvgEye","_ref","svgRef","title","titleId","props","x","y","viewBox","ref","ForwardRef","SvgHeart","fill","fillRule","transform","strokeWidth","strokeOpacity","cx","cy","r","attributeName","type","from","to","dur","repeatCount","SvgSpinner","width","height","SvgPlay","SvgStop","SvgExclamation","Preview","message","views","likes","isLoading","action","onClick","className","isImageError","setIsImageError","viewPath","generatePath","shaderToyPreviewPath","handleImageSuccess","handleImageError","styles","isError","ACTIONS","ERROR","image","src","alt","onLoad","onError","contentWrapper","PLAY","STOP","SPIN","undefined","overlay","info","spinner","BrowserItem","data","Shader","name","username","viewed","by","useScrollToTopOnMount","window","scrollTo","SvgEmpty","BigIcon","Icon","children","isSmall","icon","GlobalSpinner","isHidden","Browser","useQueryParam","withDefault","StringParam","text","setText","debouncedText","setDebouncedText","NumberParam","page","setPage","sort","setSort","BooleanParam","hasGPUSound","setHasGPUSound","hasMicrophone","setHasMicrophone","hasWebcam","setHasWebcam","hasMultipass","setHasMultipass","hasSoundCloud","setHasSoundCloud","hasKeyboard","setHasKeyboard","resultsPerPage","encodeURIComponent","useQueryShaderList","RESULTS_PER_PAGE","isFetching","isSuccess","resolvedData","refetch","textTimeoutRef","handleTextChange","e","value","clearTimeout","setTimeout","handleTextDelete","handleCheckGPUSound","checked","handleCheckMicrophone","handleCheckWebcam","handleCheckMultipass","handleCheckSoundCloud","handleCheckKeyboard","handleSortChange","totalShaders","Shaders","maxPage","Math","ceil","handleFirstPage","handlePrevPage","min","max","handleNextPage","handleLastPage","filters","onChange","placeholder","checks","filter","pagination","listWrapper","ExclamationIcon","Spinner","EmptyIcon","resultList","Results","map","item","inside","makeSource","shaderSource","inputs","isLowEnd","isBuffer","input","samplerType","texture","channel","join","compileShader","shader","createShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","Error","getIsLowEnd","test","userAgent","toShaderToyURL","url","URL","toString","initShaderProgram","forceLowEnd","program","shaders","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","VERTEX_SHADER","FRAGMENT_SHADER","makeFragSource","aVertexPosition","getAttribLocation","uInvViewMatrix","getUniformLocation","uInvProjMatrix","uViewport","iResolution","iTime","iChannelTime","iMouse","iDate","iSampleRate","iChannelResolution","iFrame","iTimeDelta","iFrameRate","iChannel","iCh","sampler","size","loaded","POSITIONS","INDICES","Timing","fpsRate","_initialized","_lastFrameTime","_lastFPSTime","_start","performance","now","_fps","_totalFrames","_fpsFrames","fpsDelta","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","Mouse","_x","_y","_z","_w","z","w","POS_X_COLOR","Uint8Array","NEG_X_COLOR","POS_Y_COLOR","NEG_Y_COLOR","POS_Z_COLOR","NEG_Z_COLOR","setCubeFaceColor","face","color","texImage2D","RGBA8","RGBA","UNSIGNED_BYTE","IMAGE_NUMBER_TO_ID","0","1","2","3","4","5","TextureCube","wrap","vflip","srgb","internal","WebGL2RenderingContext","TEXTURE_CUBE_MAP","resolution","createTexture","magFilter","NEAREST","LINEAR","minFilter","LINEAR_MIPMAP_LINEAR","bindTexture","TEXTURE_CUBE_MAP_POSITIVE_X","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_CUBE_MAP_NEGATIVE_Z","hasErrored","images","Image","selfI","onload","initFromImages","values","img","onerror","alert","lastDotIndex","lastIndexOf","slice","pixelStorei","UNPACK_FLIP_Y_WEBGL","xPos","xNeg","yNeg","yPos","zPos","zNeg","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","generateMipmap","Texture2D","TEXTURE_2D","CLAMP_TO_EDGE","REPEAT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","TEXTURE_WRAP_S","TEXTURE_WRAP_T","Texture2DImage","initFrom","Texture2DVideo","video","autoplay","muted","loop","playing","timeupdate","checkReady","play","videoWidth","videoHeight","updateFrom","renderpass","ctype","includes","code","shaderProgram","quad","positions","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","indices","ELEMENT_ARRAY_BUFFER","Uint16Array","bind","vertexAttribPointer","FLOAT","enableVertexAttribArray","draw","drawElements","TRIANGLES","UNSIGNED_SHORT","initQuad","timing","mouse","refSpace","console","log","pose","getViewerPose","glLayer","renderState","bindFramebuffer","FRAMEBUFFER","framebuffer","view","viewport","getViewport","invViewMatrix","matrix","invProjMatrix","mat4","invert","create","projectionMatrix","useProgram","uniformMatrix4fv","uniform4fv","uniform3f","uniform1f","uniform1i","update","activeTexture","uniform3fv","uniform1fv","ViewerButton","myCreateDrawScene","useMemo","handleKeyDown","removeEventListener","defaultProps","bbc2html","content","allowMultimedia","replace","_","__","g2","___","g4","BBCode","string","dangerouslySetInnerHTML","__html","Viewer","useParams","error","setForceLowEnd","handleCheckForceLowEnd","property","errorMessage","bits","shaderToyViewPath","shaderToyProfilePath","dateText","padStart","timeText","dateTimeText","flags","vr","webcam","microphone","gpuSound","keyboard","multipass","soundCloud","main","header","disabled","hasTitle","href","commaList","tags","tag","description","side","JSON","stringify","Error404","App","exact","path","footer","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","customHistory","createBrowserHistory","basename","process","BASENAME","prevHistoryPush","push","lastLocation","location","listen","pathname","state","search","hash","queryCache","QueryCache","ReactDOM","render","StrictMode","history","ReactRouterRoute","Route","getElementById"],"mappings":"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","file":"static/js/main.db0008c5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Preview\":\"Preview_Preview__3QH63\",\"image\":\"Preview_image__1kjCe\",\"isImageError\":\"Preview_isImageError__3zwiq\",\"overlay\":\"Preview_overlay__1iwnL\",\"info\":\"Preview_info__26VNe\",\"spinner\":\"Preview_spinner__3QBcR\",\"isLoading\":\"Preview_isLoading__3EEbd\",\"contentWrapper\":\"Preview_contentWrapper__wKA5t\",\"action\":\"Preview_action__1XZTO\",\"isError\":\"Preview_isError__sI2RP\",\"message\":\"Preview_message__IY1MK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Viewer\":\"Viewer_Viewer__11y3P\",\"main\":\"Viewer_main__1xuls\",\"info\":\"Viewer_info__3Rdot\",\"side\":\"Viewer_side__2sQW7\",\"header\":\"Viewer_header__nqzCV\",\"hasTitle\":\"Viewer_hasTitle__qiUa4\",\"commaList\":\"Viewer_commaList__2meVF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16yPc\",\"header\":\"App_header__1-vA7\",\"footer\":\"App_footer__253NV\",\"main\":\"App_main__3z6Ng\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BigIcon\":\"BigIcon_BigIcon__1iuMW\",\"isSmall\":\"BigIcon_isSmall__1Xlk2\",\"icon\":\"BigIcon_icon__2lDyG\"};","export const APP_KEY = 'NdrK4M'\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GlobalSpinner\":\"GlobalSpinner_GlobalSpinner__3yyM1\",\"isHidden\":\"GlobalSpinner_isHidden__3cnHY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Browser\":\"Browser_Browser__27H8R\",\"filters\":\"Browser_filters__1npeZ\",\"filter\":\"Browser_filter__1Zb84\",\"checked\":\"Browser_checked__3es_b\",\"listWrapper\":\"Browser_listWrapper__2X0Hi\",\"resultList\":\"Browser_resultList__25pZ_\",\"text\":\"Browser_text__2qyvE\",\"sort\":\"Browser_sort__3xhhS\",\"checks\":\"Browser_checks__VhKrC\",\"pagination\":\"Browser_pagination__3MUUt\",\"item\":\"Browser_item__3ML8F\",\"inside\":\"Browser_inside__L8SeH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"by\":\"BrowserItem_by__1Pr1d\"};","const { useState, useEffect, useRef, useCallback } = require('react')\r\n\r\nconst xr = navigator.xr\r\n\r\nexport const useXRSession = (createDrawScene) => {\r\n  const [isSupported, setIsSupported] = useState(null)\r\n\r\n  useEffect(() => {\r\n    if (!xr) {\r\n      return\r\n    }\r\n\r\n    xr.isSessionSupported('immersive-vr').then(setIsSupported)\r\n  }, [])\r\n\r\n  const xrSession = useRef(null)\r\n\r\n  const [isStarting, setIsStarting] = useState(false)\r\n  const [isRunning, setIsRunning] = useState(false)\r\n\r\n  const stop = useCallback(() => {\r\n    if (xrSession.current) {\r\n      xrSession.current.end()\r\n    }\r\n\r\n    xrSession.current = null\r\n\r\n    setIsStarting(false)\r\n    setIsRunning(false)\r\n  }, [])\r\n\r\n  const start = useCallback(() => {\r\n    if (!createDrawScene) {\r\n      return\r\n    }\r\n\r\n    setIsStarting(true)\r\n    ;(async () => {\r\n      xrSession.current = await xr.requestSession('immersive-vr', {\r\n        requiredFeatures: ['local-floor'],\r\n      })\r\n\r\n      const onXRSessionEnded = () => {\r\n        stop()\r\n      }\r\n\r\n      xrSession.current.addEventListener('end', onXRSessionEnded)\r\n\r\n      const canvas = document.createElement('canvas')\r\n      const gl = canvas.getContext('webgl2', { xrCompatible: true })\r\n      const drawScene = createDrawScene(gl)\r\n\r\n      xrSession.current.updateRenderState({\r\n        baseLayer: new global.XRWebGLLayer(xrSession.current, gl),\r\n      })\r\n\r\n      const xrRefSpace = await xrSession.current.requestReferenceSpace('local')\r\n\r\n      setIsStarting(false)\r\n      setIsRunning(true)\r\n\r\n      const drawXR = (time, frame) => {\r\n        drawScene(time, frame, xrRefSpace)\r\n        frame.session.requestAnimationFrame(drawXR)\r\n      }\r\n\r\n      xrSession.current.requestAnimationFrame(drawXR)\r\n    })()\r\n  }, [stop, createDrawScene])\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      stop()\r\n    }\r\n  }, [stop, createDrawScene])\r\n\r\n  return {\r\n    isAvailable: !!xr,\r\n    isSupported,\r\n    isStarting,\r\n    isRunning,\r\n    start,\r\n    stop,\r\n  }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ViewerButton\":\"ViewerButton_ViewerButton__Nme8I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BBCode\":\"BBCode_BBCode__3idYZ\"};","export const ROOT_PATH = '/'\r\n\r\nexport const BROWSER_PATH = ROOT_PATH\r\n\r\nexport const VIEW_PATH = '/view/:id'\r\n\r\nexport const SHADERTOY_ROOT_PATH = 'https://www.shadertoy.com/'\r\n\r\nexport const SHADERTOY_PREVIEW_PATH =\r\n  'https://www.shadertoy.com/media/shaders/:id.jpg'\r\n\r\nexport const SHADERTOY_USER_PATH = 'https://www.shadertoy.com/user/:username'\r\n\r\nexport const SHADERTOY_VIEW_PATH = 'https://www.shadertoy.com/view/:id'\r\n\r\nexport const ALVARO_ROOT_PATH = 'https://github.com/alvaro-cuesta/'\r\n","const { usePaginatedQuery } = require('react-query')\r\nconst { APP_KEY } = require('../config')\r\n\r\nexport const useQueryShaderList = (\r\n  resultsPerPage,\r\n  text,\r\n  page,\r\n  sort,\r\n  hasGPUSound,\r\n  hasMicrophone,\r\n  hasWebcam,\r\n  hasMultipass,\r\n  hasSoundCloud,\r\n  hasKeyboard,\r\n) =>\r\n  usePaginatedQuery(\r\n    [\r\n      'shader-list',\r\n      text,\r\n      page,\r\n      sort,\r\n      hasGPUSound,\r\n      hasMicrophone,\r\n      hasWebcam,\r\n      hasMultipass,\r\n      hasSoundCloud,\r\n      hasKeyboard,\r\n    ],\r\n    () => {\r\n      const controller = new AbortController()\r\n      const signal = controller.signal\r\n\r\n      const promise = fetch(\r\n        `https://www.shadertoy.com/api/v1/shaders${\r\n          text ? `/query/${encodeURIComponent(text)}` : ''\r\n        }?filter=vr${hasGPUSound ? '&filter=soundoutput' : ''}${\r\n          hasMicrophone ? '&filter=soundinput' : ''\r\n        }${hasWebcam ? '&filter=webcam' : ''}${\r\n          hasMultipass ? '&filter=multipass' : ''\r\n        }${hasSoundCloud ? '&filter=musicstream' : ''}${\r\n          hasKeyboard ? '&filter=keyboard' : ''\r\n        }&sort=${sort}&from=${\r\n          (page - 1) * resultsPerPage\r\n        }&num=${resultsPerPage}&key=${APP_KEY}`,\r\n        {\r\n          signal,\r\n        },\r\n      ).then((res) => res.json())\r\n\r\n      promise.cancel = () => controller.abort()\r\n\r\n      return promise\r\n    },\r\n    {\r\n      refetchOnWindowFocus: false,\r\n      keepPreviousData: true,\r\n    },\r\n  )\r\n","import { useQuery } from 'react-query'\r\nimport { APP_KEY } from '../config'\r\n\r\nexport const useQueryShader = (id) =>\r\n  useQuery(\r\n    ['shader', id],\r\n    () => {\r\n      const controller = new AbortController()\r\n      const signal = controller.signal\r\n\r\n      const promise = fetch(\r\n        `https://www.shadertoy.com/api/v1/shaders/${id}&key=${APP_KEY}`,\r\n        {\r\n          signal,\r\n        },\r\n      ).then((res) => res.json())\r\n\r\n      promise.cancel = () => controller.abort()\r\n\r\n      return promise\r\n    },\r\n    {\r\n      refetchOnWindowFocus: false,\r\n      keepPreviousData: true,\r\n    },\r\n  )\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M234.667,170.667c-35.307,0-64,28.693-64,64s28.693,64,64,64s64-28.693,64-64S269.973,170.667,234.667,170.667z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M234.667,74.667C128,74.667,36.907,141.013,0,234.667c36.907,93.653,128,160,234.667,160 c106.773,0,197.76-66.347,234.667-160C432.427,141.013,341.44,74.667,234.667,74.667z M234.667,341.333 c-58.88,0-106.667-47.787-106.667-106.667S175.787,128,234.667,128s106.667,47.787,106.667,106.667 S293.547,341.333,234.667,341.333z\"\n}));\n\nfunction SvgEye(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 469.333 469.333\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEye);\nexport default __webpack_public_path__ + \"static/media/eye.c6f3b1f8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M376,30c-27.783,0-53.255,8.804-75.707,26.168c-21.525,16.647-35.856,37.85-44.293,53.268 c-8.437-15.419-22.768-36.621-44.293-53.268C189.255,38.804,163.783,30,136,30C58.468,30,0,93.417,0,177.514 c0,90.854,72.943,153.015,183.369,247.118c18.752,15.981,40.007,34.095,62.099,53.414C248.38,480.596,252.12,482,256,482 s7.62-1.404,10.532-3.953c22.094-19.322,43.348-37.435,62.111-53.425C439.057,330.529,512,268.368,512,177.514 C512,93.417,453.532,30,376,30z\"\n}));\n\nfunction SvgHeart(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgHeart);\nexport default __webpack_public_path__ + \"static/media/heart.1859af6a.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  transform: \"translate(1 1)\",\n  strokeWidth: 2\n}, /*#__PURE__*/React.createElement(\"circle\", {\n  strokeOpacity: 0.5,\n  cx: 18,\n  cy: 18,\n  r: 18\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M36 18c0-9.94-8.06-18-18-18\"\n}, /*#__PURE__*/React.createElement(\"animateTransform\", {\n  attributeName: \"transform\",\n  type: \"rotate\",\n  from: \"0 18 18\",\n  to: \"360 18 18\",\n  dur: \"1s\",\n  repeatCount: \"indefinite\"\n}))));\n\nfunction SvgSpinner(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 38,\n    height: 38,\n    viewBox: \"0 0 38 38\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSpinner);\nexport default __webpack_public_path__ + \"static/media/spinner.134caff8.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256,0C114.833,0,0,114.844,0,256s114.833,256,256,256s256-114.844,256-256S397.167,0,256,0z M357.771,264.969 l-149.333,96c-1.75,1.135-3.771,1.698-5.771,1.698c-1.75,0-3.521-0.438-5.104-1.302C194.125,359.49,192,355.906,192,352V160 c0-3.906,2.125-7.49,5.563-9.365c3.375-1.854,7.604-1.74,10.875,0.396l149.333,96c3.042,1.958,4.896,5.344,4.896,8.969 S360.813,263.01,357.771,264.969z\"\n}));\n\nfunction SvgPlay(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlay);\nexport default __webpack_public_path__ + \"static/media/play.3c987888.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M256,0C114.615,0,0,114.615,0,256s114.615,256,256,256s256-114.615,256-256S397.385,0,256,0z M336,320 c0,8.837-7.163,16-16,16H192c-8.837,0-16-7.163-16-16V192c0-8.837,7.163-16,16-16h128c8.837,0,16,7.163,16,16V320z\"\n}));\n\nfunction SvgStop(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgStop);\nexport default __webpack_public_path__ + \"static/media/stop.ad456e55.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12,0C5.373,0,0,5.373,0,12s5.373,12,12,12s12-5.373,12-12S18.627,0,12,0z M12,19.66 c-0.938,0-1.58-0.723-1.58-1.66c0-0.964,0.669-1.66,1.58-1.66c0.963,0,1.58,0.696,1.58,1.66C13.58,18.938,12.963,19.66,12,19.66z M12.622,13.321c-0.239,0.815-0.992,0.829-1.243,0c-0.289-0.956-1.316-4.585-1.316-6.942c0-3.11,3.891-3.125,3.891,0 C13.953,8.75,12.871,12.473,12.622,13.321z\"\n}));\n\nfunction SvgExclamation(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"none\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgExclamation);\nexport default __webpack_public_path__ + \"static/media/exclamation.9bccad91.svg\";\nexport { ForwardRef as ReactComponent };","import PropTypes from 'prop-types'\r\nimport cx from 'classnames'\r\nimport { generatePath, Link } from 'react-router-dom'\r\nimport { SHADERTOY_PREVIEW_PATH, VIEW_PATH } from '../paths'\r\nimport styles from './Preview.module.scss'\r\nimport { ReactComponent as EyeIcon } from '../icons/eye.svg'\r\nimport { ReactComponent as HeartIcon } from '../icons/heart.svg'\r\nimport { ReactComponent as Spinner } from '../icons/spinner.svg'\r\nimport { ReactComponent as PlayIcon } from '../icons/play.svg'\r\nimport { ReactComponent as StopIcon } from '../icons/stop.svg'\r\nimport { ReactComponent as ExclamationIcon } from '../icons/exclamation.svg'\r\nimport { useCallback, useState } from 'react'\r\n\r\nconst Preview = ({\r\n  id,\r\n  message,\r\n  views,\r\n  likes,\r\n  isLoading,\r\n  action,\r\n  onClick,\r\n  className,\r\n}) => {\r\n  const [isImageError, setIsImageError] = useState(false)\r\n  const viewPath = generatePath(VIEW_PATH, { id })\r\n  const shaderToyPreviewPath = generatePath(SHADERTOY_PREVIEW_PATH, { id })\r\n\r\n  const handleImageSuccess = useCallback(() => {\r\n    setIsImageError(false)\r\n  }, [])\r\n\r\n  const handleImageError = useCallback(() => {\r\n    setIsImageError(true)\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      className={cx(\r\n        styles.Preview,\r\n        {\r\n          [styles.isLoading]: isLoading,\r\n          [styles.isError]: action === Preview.ACTIONS.ERROR,\r\n        },\r\n        className,\r\n      )}\r\n    >\r\n      <Link to={viewPath} onClick={onClick}>\r\n        <img\r\n          className={cx(styles.image, { [styles.isImageError]: isImageError })}\r\n          src={shaderToyPreviewPath}\r\n          alt={''}\r\n          onLoad={handleImageSuccess}\r\n          onError={handleImageError}\r\n        />\r\n      </Link>\r\n\r\n      <div className={styles.contentWrapper}>\r\n        <div className={styles.action}>\r\n          {action === Preview.ACTIONS.PLAY ? (\r\n            <PlayIcon />\r\n          ) : action === Preview.ACTIONS.STOP ? (\r\n            <StopIcon />\r\n          ) : action === Preview.ACTIONS.SPIN ? (\r\n            <Spinner />\r\n          ) : action === Preview.ACTIONS.ERROR ? (\r\n            <ExclamationIcon />\r\n          ) : null}\r\n        </div>\r\n\r\n        {message ? <div className={styles.message}>{message}</div> : null}\r\n      </div>\r\n\r\n      {views !== undefined || likes !== undefined ? (\r\n        <div className={cx(styles.overlay, styles.info)}>\r\n          {views !== undefined ? (\r\n            <div>\r\n              {views} <EyeIcon className=\"icon\" />\r\n            </div>\r\n          ) : null}\r\n          {likes !== undefined ? (\r\n            <div>\r\n              {likes} <HeartIcon className=\"icon\" />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      ) : null}\r\n\r\n      <div className={cx(styles.overlay, styles.spinner)}>\r\n        <Spinner className=\"icon\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nPreview.ACTIONS = {\r\n  PLAY: 'PLAY',\r\n  STOP: 'STOP',\r\n  SPIN: 'SPIN',\r\n  ERROR: 'ERROR',\r\n}\r\n\r\nPreview.propTypes = {\r\n  message: PropTypes.element,\r\n  views: PropTypes.number,\r\n  likes: PropTypes.number,\r\n  isLoading: PropTypes.bool,\r\n  className: PropTypes.string,\r\n  action: PropTypes.oneOf(Object.values(Preview.ACTIONS)),\r\n  onClick: PropTypes.func,\r\n}\r\n\r\nexport default Preview\r\n","import PropTypes from 'prop-types'\r\nimport { useQueryShader } from '../hooks/useQueryShader'\r\nimport Preview from './Preview'\r\nimport styles from './BrowserItem.module.scss'\r\n\r\nconst BrowserItem = ({ id }) => {\r\n  const { isLoading, data } = useQueryShader(id)\r\n  const { name, username, viewed: views, likes } = data?.Shader?.info || {}\r\n\r\n  return (\r\n    <Preview\r\n      id={id}\r\n      message={\r\n        data?.Shader?.info ? (\r\n          <>\r\n            {name} <span className={styles.by}>by {username}</span>\r\n          </>\r\n        ) : null\r\n      }\r\n      views={views}\r\n      likes={likes}\r\n      isLoading={isLoading}\r\n    />\r\n  )\r\n}\r\n\r\nBrowserItem.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n}\r\n\r\nexport default BrowserItem\r\n","import { useEffect } from 'react'\r\n\r\nconst useScrollToTopOnMount = () => {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n}\r\n\r\nexport default useScrollToTopOnMount\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m192.111 339.102c40.861 30.689 99.498 27.781 137.135-9.855 37.611-37.611 40.563-96.248 9.855-137.135z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  id: \"XMLID_1080_\",\n  d: \"m255 150c-58.031 0-105 46.962-105 105 0 22.982 7.338 44.834 20.898 62.889l146.99-146.99c-18.054-13.561-39.906-20.899-62.888-20.899z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m255 0c-140.931 0-255 114.05-255 255 0 140.931 114.05 255 255 255 140.932 0 255-114.049 255-255 0-140.931-114.049-255-255-255zm95.459 350.459c-49.226 49.227-126.815 52.457-179.726 10.02l-32.406 32.406-21.213-21.213 32.406-32.406c-19.125-23.846-29.52-53.255-29.52-84.266 0-74.611 60.38-135 135-135 31.012 0 60.42 10.395 84.267 29.52l32.406-32.406 21.213 21.213-32.406 32.406c42.362 52.818 39.303 130.404-10.021 179.726z\"\n}));\n\nfunction SvgEmpty(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 510 510\",\n    width: 512,\n    height: 512,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEmpty);\nexport default __webpack_public_path__ + \"static/media/empty.b8bde181.svg\";\nexport { ForwardRef as ReactComponent };","import PropTypes from 'prop-types'\r\nimport cx from 'classnames'\r\nimport styles from './BigIcon.module.scss'\r\n\r\nconst BigIcon = ({ Icon, children, isSmall }) => (\r\n  <div className={cx(styles.BigIcon, { [styles.isSmall]: isSmall })}>\r\n    <Icon className={styles.icon} />\r\n    {children}\r\n  </div>\r\n)\r\n\r\nBigIcon.propTypes = {\r\n  Icon: PropTypes.elementType.isRequired,\r\n  isSmall: PropTypes.bool,\r\n}\r\n\r\nexport default BigIcon\r\n","import PropTypes from 'prop-types'\r\nimport cx from 'classnames'\r\nimport { ReactComponent as Spinner } from '../icons/spinner.svg'\r\nimport styles from './GlobalSpinner.module.scss'\r\n\r\nconst GlobalSpinner = ({ isHidden }) => (\r\n  <Spinner\r\n    className={cx(styles.GlobalSpinner, { [styles.isHidden]: isHidden })}\r\n  />\r\n)\r\n\r\nGlobalSpinner.propTypes = {\r\n  isHidden: PropTypes.bool,\r\n}\r\n\r\nexport default GlobalSpinner\r\n","import { useCallback, useEffect, useRef, useState } from 'react'\nimport cx from 'classnames'\nimport {\n  useQueryParam,\n  withDefault,\n  NumberParam,\n  StringParam,\n  BooleanParam,\n} from 'use-query-params'\nimport { useQueryShaderList } from '../hooks/useQueryShaderList'\nimport BrowserItem from './BrowserItem'\nimport styles from './Browser.module.scss'\nimport { Helmet } from 'react-helmet-async'\nimport useScrollToTopOnMount from '../hooks/useScrollToTopOnMount'\nimport { ReactComponent as Spinner } from '../icons/spinner.svg'\nimport { ReactComponent as EmptyIcon } from '../icons/empty.svg'\nimport { ReactComponent as ExclamationIcon } from '../icons/exclamation.svg'\nimport BigIcon from './BigIcon'\nimport GlobalSpinner from './GlobalSpinner'\n\nconst TEXT_DEBOUNCE_MSECS = 350\n\nconst Browser = () => {\n  useScrollToTopOnMount()\n\n  // Query params\n  const [text, setText] = useQueryParam('text', withDefault(StringParam, ''))\n  const [debouncedText, setDebouncedText] = useState(text)\n  const [page, setPage] = useQueryParam('page', withDefault(NumberParam, 1))\n  const [sort, setSort] = useQueryParam(\n    'sort',\n    withDefault(StringParam, 'popular'),\n  )\n  const [hasGPUSound, setHasGPUSound] = useQueryParam('gpusound', BooleanParam)\n  const [hasMicrophone, setHasMicrophone] = useQueryParam(\n    'microphone',\n    BooleanParam,\n  )\n  const [hasWebcam, setHasWebcam] = useQueryParam('webcam', BooleanParam)\n  const [hasMultipass, setHasMultipass] = useQueryParam(\n    'multipass',\n    BooleanParam,\n  )\n  const [hasSoundCloud, setHasSoundCloud] = useQueryParam(\n    'soundcloud',\n    BooleanParam,\n  )\n  const [hasKeyboard, setHasKeyboard] = useQueryParam('keyboard', BooleanParam)\n\n  // List fetching\n  const {\n    isLoading,\n    isFetching,\n    isError,\n    isSuccess,\n    resolvedData: data,\n    refetch,\n  } = useQueryShaderList(\n    Browser.RESULTS_PER_PAGE,\n    debouncedText,\n    page,\n    sort,\n    hasGPUSound,\n    hasMicrophone,\n    hasWebcam,\n    hasMultipass,\n    hasSoundCloud,\n    hasKeyboard,\n  )\n\n  // Text\n  const textTimeoutRef = useRef(null)\n\n  const handleTextChange = useCallback(\n    (e) => {\n      const value = e.target.value.length > 0 ? e.target.value : undefined\n\n      setText(value)\n\n      if (textTimeoutRef.current) {\n        clearTimeout(textTimeoutRef.current)\n        textTimeoutRef.current = null\n      }\n\n      textTimeoutRef.current = setTimeout(() => {\n        setDebouncedText(value)\n      }, TEXT_DEBOUNCE_MSECS)\n    },\n    [setText],\n  )\n  const handleTextDelete = useCallback(() => {\n    setText(undefined)\n    setDebouncedText(undefined)\n  }, [setText])\n\n  // Filters\n  const handleCheckGPUSound = useCallback(\n    (e) => {\n      setHasGPUSound(e.target.checked ? true : undefined)\n    },\n    [setHasGPUSound],\n  )\n  const handleCheckMicrophone = useCallback(\n    (e) => {\n      setHasMicrophone(e.target.checked ? true : undefined)\n    },\n    [setHasMicrophone],\n  )\n  const handleCheckWebcam = useCallback(\n    (e) => {\n      setHasWebcam(e.target.checked ? true : undefined)\n    },\n    [setHasWebcam],\n  )\n  const handleCheckMultipass = useCallback(\n    (e) => {\n      setHasMultipass(e.target.checked ? true : undefined)\n    },\n    [setHasMultipass],\n  )\n  const handleCheckSoundCloud = useCallback(\n    (e) => {\n      setHasSoundCloud(e.target.checked ? true : undefined)\n    },\n    [setHasSoundCloud],\n  )\n  const handleCheckKeyboard = useCallback(\n    (e) => {\n      setHasKeyboard(e.target.checked ? true : undefined)\n    },\n    [setHasKeyboard],\n  )\n\n  // Sort\n  const handleSortChange = useCallback(\n    (e) => {\n      setSort(e.target.value !== 'popular' ? e.target.value : undefined)\n    },\n    [setSort],\n  )\n\n  // Pagination\n  const totalShaders = data?.Shaders || 0\n  const maxPage = Math.ceil(totalShaders / Browser.RESULTS_PER_PAGE) || 1\n\n  useEffect(() => {\n    if (data && page > maxPage) {\n      setPage(maxPage, 'replaceIn')\n    }\n  }, [data, page, maxPage, setPage])\n\n  const handleFirstPage = useCallback(() => {\n    setPage(1)\n  }, [setPage])\n\n  const handlePrevPage = useCallback(() => {\n    setPage((page) => Math.min(Math.max(1, page - 1), maxPage))\n  }, [setPage, maxPage])\n\n  const handleNextPage = useCallback(() => {\n    setPage((page) => Math.min(Math.max(1, page + 1), maxPage))\n  }, [setPage, maxPage])\n\n  const handleLastPage = useCallback(() => {\n    setPage(maxPage)\n  }, [setPage, maxPage])\n\n  return (\n    <div className={styles.Browser}>\n      <Helmet>\n        <title>Browser - XRderToy Viewer</title>\n      </Helmet>\n\n      <div className={styles.filters}>\n        <div className={styles.text}>\n          <input\n            type=\"text\"\n            value={text}\n            onChange={handleTextChange}\n            placeholder=\"Search...\"\n          />\n          <button onClick={handleTextDelete}>X</button>\n        </div>\n        <label className={styles.sort}>\n          Sort by:{' '}\n          <select onChange={handleSortChange} value={sort}>\n            <option value=\"popular\">Popular</option>\n            <option value=\"newest\">Newest</option>\n            <option value=\"love\">Love</option>\n            <option value=\"hot\">Hot</option>\n            <option value=\"name\">Name</option>\n          </select>\n        </label>\n        <div className={styles.checks}>\n          <label\n            className={cx(styles.filter, { [styles.checked]: hasMultipass })}\n          >\n            <input\n              type=\"checkbox\"\n              checked={hasMultipass}\n              onChange={handleCheckMultipass}\n            />\n            Multipass\n          </label>\n          <label\n            className={cx(styles.filter, { [styles.checked]: hasGPUSound })}\n          >\n            <input\n              type=\"checkbox\"\n              checked={hasGPUSound}\n              onChange={handleCheckGPUSound}\n            />\n            GPU Sound\n          </label>\n          <label\n            className={cx(styles.filter, { [styles.checked]: hasMicrophone })}\n          >\n            <input\n              type=\"checkbox\"\n              checked={hasMicrophone}\n              onChange={handleCheckMicrophone}\n            />\n            Microphone\n          </label>\n          <label\n            className={cx(styles.filter, { [styles.checked]: hasSoundCloud })}\n          >\n            <input\n              type=\"checkbox\"\n              checked={hasSoundCloud}\n              onChange={handleCheckSoundCloud}\n            />\n            SoundCloud\n          </label>\n          <label className={cx(styles.filter, { [styles.checked]: hasWebcam })}>\n            <input\n              type=\"checkbox\"\n              checked={hasWebcam}\n              onChange={handleCheckWebcam}\n            />\n            Webcam\n          </label>\n          <label\n            className={cx(styles.filter, { [styles.checked]: hasKeyboard })}\n          >\n            <input\n              type=\"checkbox\"\n              checked={hasKeyboard}\n              onChange={handleCheckKeyboard}\n            />\n            Keyboard\n          </label>\n        </div>\n        {isSuccess ? (\n          <div className={styles.pagination}>\n            <button onClick={handleFirstPage}>&lt;&lt;</button>\n            <button onClick={handlePrevPage}>&lt;</button>\n            Page {page} of {maxPage} ({totalShaders} shaders)\n            <button onClick={handleNextPage}>&gt;</button>\n            <button onClick={handleLastPage}>&gt;&gt;</button>\n          </div>\n        ) : null}\n      </div>\n      <div className={styles.listWrapper}>\n        {isError ? (\n          <BigIcon Icon={ExclamationIcon} isSmall>\n            <h1>Error loading shaders list</h1>\n            <button onClick={refetch}>Retry</button>\n          </BigIcon>\n        ) : isLoading ? (\n          <BigIcon Icon={Spinner} isSmall>\n            <h1>Loading shaders...</h1>\n          </BigIcon>\n        ) : data.Shaders === 0 ? (\n          <BigIcon Icon={EmptyIcon} isSmall>\n            <h1>No shaders found matching that criteria</h1>\n          </BigIcon>\n        ) : (\n          <ul className={styles.resultList}>\n            {data.Results.map((id) => (\n              <li key={id} className={styles.item}>\n                <div className={styles.inside}>\n                  <BrowserItem id={id} />\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      <GlobalSpinner isHidden={!isFetching || isLoading} />\n    </div>\n  )\n}\n\nBrowser.propTypes = {}\n\nBrowser.RESULTS_PER_PAGE = 12\n\nexport default Browser\n","const makeSource = ({ shaderSource, inputs, isLowEnd, isBuffer }) => {\r\n  return `#version 300 es\r\n#ifdef GL_ES\r\nprecision highp float;\r\nprecision highp int;\r\nprecision mediump sampler3D;\r\n#endif\r\n\r\n#define HW_PERFORMANCE ${isLowEnd ? 1 : 0}\r\n\r\nuniform vec4 uViewport;\r\n\r\nuniform vec3 iResolution;\r\nuniform float iTime;\r\nuniform float iChannelTime[4];\r\nuniform vec4 iMouse;\r\nuniform vec4 iDate;\r\nuniform float iSampleRate;\r\nuniform vec3 iChannelResolution[4];\r\nuniform int iFrame;\r\nuniform float iTimeDelta;\r\nuniform float iFrameRate;\r\n\r\n${inputs\r\n  .map((input) => {\r\n    const samplerType = input?.texture?.samplerType\r\n    const i = input?.channel\r\n\r\n    return `uniform ${samplerType} iChannel${i};\r\n\r\nuniform struct {\r\n  ${samplerType} sampler;\r\n  vec3 size;\r\n  float time;\r\n  int loaded;\r\n} iCh${i};`\r\n  })\r\n  .join('\\n\\n')}\r\n\r\nvoid mainImage(out vec4 c, in vec2 f);\r\nvoid mainVR(out vec4 c, in vec2 f, in vec3 ro, in vec3 rd);\r\nvoid st_assert(bool cond);\r\nvoid st_assert(bool cond, int v);\r\n\r\n${shaderSource}\r\n\r\nin vec3 vZNearPos;\r\nin vec3 vRayOrig;\r\n\r\nout vec4 fragColor;\r\n\r\nvoid st_assert(bool cond, int v) {\r\n  if (!cond) {\r\n    if (v == 0) {\r\n      fragColor.x = -1.0;\r\n    }\r\n    else if (v == 1) {\r\n      fragColor.y=-1.0;\r\n    }\r\n    else if (v == 2) {\r\n      fragColor.z = -1.0;\r\n    }\r\n    else {\r\n      fragColor.w = -1.0;\r\n    }\r\n  }\r\n}\r\n\r\nvoid st_assert(bool cond) {\r\n  if (!cond) {\r\n    fragColor.x = -1.0;\r\n  }\r\n}\r\n\r\nvoid main() {\r\n  vec3 rayDir = normalize(vZNearPos - vRayOrig);\r\n  vec2 fragCoord = gl_FragCoord.xy * gl_FragCoord.w;\r\n  vec2 viewFragCoord = fragCoord - uViewport.xy;\r\n\r\n  vec4 color = vec4(0.0, 0.0, 0.0, 1.0);\r\n  mainVR(color, viewFragCoord, vRayOrig, rayDir);\r\n  ${!isBuffer ? 'color.w = 1.0;' : ''}\r\n  fragColor = color;\r\n}\r\n`\r\n}\r\n\r\nexport default makeSource\r\n","export const compileShader = (gl, type, source) => {\r\n  const shader = gl.createShader(type)\r\n\r\n  gl.shaderSource(shader, source)\r\n\r\n  gl.compileShader(shader)\r\n\r\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n    const message =\r\n      'An error occurred compiling the shader: ' + gl.getShaderInfoLog(shader)\r\n\r\n    gl.deleteShader(shader)\r\n\r\n    throw new Error(message)\r\n  }\r\n\r\n  return shader\r\n}\r\n\r\nexport const linkProgram = (gl, shaders) => {\r\n  const program = gl.createProgram()\r\n\r\n  for (const shader of shaders) {\r\n    gl.attachShader(program, shader)\r\n  }\r\n\r\n  gl.linkProgram(program)\r\n\r\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n    const message =\r\n      'Unable to initialize the shader program: ' +\r\n      gl.getProgramInfoLog(program)\r\n\r\n    gl.deleteProgram(program)\r\n\r\n    throw new Error(message)\r\n  }\r\n\r\n  return program\r\n}\r\n/*\r\n\r\nexport const getLocations = (gl, program, attributeNames, uniformNames) => {\r\n  const attributes = attributeNames\r\n    .map((attributeName) => [\r\n      attributeName,\r\n      gl.getAttribLocation(program, attributeName),\r\n    ])\r\n    .reduce((obj, [k, v]) => {\r\n      obj[k] = v\r\n      return obj\r\n    }, {})\r\n\r\n  const uniforms = uniformNames\r\n    .map((uniformName) => [\r\n      uniformName,\r\n      gl.getUniformLocation(program, uniformName),\r\n    ])\r\n    .reduce((obj, [k, v]) => {\r\n      obj[k] = v\r\n      return obj\r\n    }, {})\r\n\r\n  return {\r\n    attributes,\r\n    uniforms,\r\n  }\r\n}\r\n\r\n*/\r\n","export const getIsLowEnd = () =>\r\n  /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|SamsungBrowser|OculusBrowser|Mobile VR/i.test(\r\n    navigator.userAgent,\r\n  )\r\n\r\nexport const toShaderToyURL = (url) =>\r\n  new URL(url, 'https://www.shadertoy.com').toString()\r\n","import vertSource from './vert'\r\nimport makeFragSource from './frag'\r\nimport { compileShader, linkProgram } from '../gl-util'\r\nimport { getIsLowEnd } from '../../shadertoy/misc'\r\n\r\nexport const initShaderProgram = (gl, inputs, shaderSource, forceLowEnd) => {\r\n  const vert = compileShader(gl, gl.VERTEX_SHADER, vertSource)\r\n  const frag = compileShader(\r\n    gl,\r\n    gl.FRAGMENT_SHADER,\r\n    makeFragSource({\r\n      shaderSource,\r\n      isLowEnd: forceLowEnd || getIsLowEnd(),\r\n      isBuffer: false,\r\n      inputs,\r\n    }),\r\n  )\r\n  const program = linkProgram(gl, [vert, frag])\r\n\r\n  const aVertexPosition = gl.getAttribLocation(program, 'aVertexPosition')\r\n  const uInvViewMatrix = gl.getUniformLocation(program, 'uInvViewMatrix')\r\n  const uInvProjMatrix = gl.getUniformLocation(program, 'uInvProjMatrix')\r\n  const uViewport = gl.getUniformLocation(program, 'uViewport')\r\n\r\n  // ShaderToy inputs\r\n  const iResolution = gl.getUniformLocation(program, 'iResolution')\r\n  const iTime = gl.getUniformLocation(program, 'iTime')\r\n  const iChannelTime = gl.getUniformLocation(program, 'iChannelTime')\r\n  const iMouse = gl.getUniformLocation(program, 'iMouse')\r\n  const iDate = gl.getUniformLocation(program, 'iDate')\r\n  const iSampleRate = gl.getUniformLocation(program, 'iSampleRate')\r\n  const iChannelResolution = gl.getUniformLocation(\r\n    program,\r\n    'iChannelResolution',\r\n  )\r\n  const iFrame = gl.getUniformLocation(program, 'iFrame')\r\n  const iTimeDelta = gl.getUniformLocation(program, 'iTimeDelta')\r\n  const iFrameRate = gl.getUniformLocation(program, 'iFrameRate')\r\n\r\n  const iChannel = []\r\n  const iCh = []\r\n\r\n  for (const input of inputs) {\r\n    const i = input.channel\r\n    iChannel[i] = gl.getUniformLocation(program, `iChannel${i}`)\r\n    iCh[i] = {\r\n      sampler: gl.getUniformLocation(program, `iCh${i}.size`),\r\n      size: gl.getUniformLocation(program, `iCh${i}.size`),\r\n      time: gl.getUniformLocation(program, `iCh${i}.time`),\r\n      loaded: gl.getUniformLocation(program, `iCh${i}.loaded`),\r\n    }\r\n  }\r\n\r\n  return {\r\n    program,\r\n\r\n    aVertexPosition,\r\n\r\n    uInvViewMatrix,\r\n    uInvProjMatrix,\r\n    uViewport,\r\n\r\n    // ShaderToy inputs\r\n    iResolution,\r\n    iTime,\r\n    iChannelTime,\r\n    iMouse,\r\n    iDate,\r\n    iSampleRate,\r\n    iChannelResolution,\r\n    iFrame,\r\n    iTimeDelta,\r\n    iFrameRate,\r\n    iChannel,\r\n    iCh,\r\n  }\r\n}\r\n","const source = `#version 300 es\r\n#ifdef GL_ES\r\nprecision highp float;\r\nprecision highp int;\r\nprecision mediump sampler3D;\r\n#endif\r\n\r\nuniform mat4 uInvViewMatrix;\r\nuniform mat4 uInvProjMatrix;\r\n\r\nin vec2 aVertexPosition;\r\n\r\nout vec3 vZNearPos;\r\nout vec3 vRayOrig;\r\n\r\nvoid main() {\r\n  // Vertices in the near plane in NDC\r\n  gl_Position = vec4(aVertexPosition.xy, -1.0, 1.0);\r\n\r\n  // Vertices in world-space\r\n  vec4 vZNearPosW = uInvViewMatrix * uInvProjMatrix * gl_Position;\r\n  vZNearPos = vZNearPosW.xyz / vZNearPosW.w;\r\n\r\n  // Ray origin in world-space\r\n  vec4 rayOrigW = uInvViewMatrix * vec4(0, 0, 0, 1);\r\n  vRayOrig = rayOrigW.xyz / rayOrigW.w;\r\n}\r\n`\r\n\r\nexport default source\r\n","// prettier-ignore\r\nconst POSITIONS = [\r\n  1.0,  1.0,\r\n -1.0,  1.0,\r\n -1.0, -1.0,\r\n  1.0, -1.0,\r\n]\r\n\r\n// prettier-ignore\r\nconst INDICES = [\r\n 0, 1, 2,\r\n 0, 2, 3,\r\n]\r\n\r\nexport const initQuad = (gl) => {\r\n  const positions = gl.createBuffer()\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, positions)\r\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(POSITIONS), gl.STATIC_DRAW)\r\n\r\n  const indices = gl.createBuffer()\r\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indices)\r\n  gl.bufferData(\r\n    gl.ELEMENT_ARRAY_BUFFER,\r\n    new Uint16Array(INDICES),\r\n    gl.STATIC_DRAW,\r\n  )\r\n\r\n  const bind = (vertexAttribPointer) => {\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positions)\r\n    gl.vertexAttribPointer(vertexAttribPointer, 2, gl.FLOAT, false, 0, 0)\r\n    gl.enableVertexAttribArray(vertexAttribPointer)\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indices)\r\n  }\r\n\r\n  const draw = () => {\r\n    gl.drawElements(gl.TRIANGLES, INDICES.length, gl.UNSIGNED_SHORT, 0)\r\n  }\r\n\r\n  return {\r\n    bind,\r\n    draw,\r\n  }\r\n}\r\n","export default class Timing {\r\n  constructor(fpsRate) {\r\n    this.fpsRate = fpsRate\r\n    this._initialized = false\r\n  }\r\n\r\n  start() {\r\n    if (this._initialized) return\r\n\r\n    this._lastFrameTime = this._lastFPSTime = this._start = performance.now()\r\n    this._fps = 0\r\n    this._totalFrames = 0\r\n    this._fpsFrames = 0\r\n\r\n    this._initialized = true\r\n  }\r\n\r\n  get iTime() {\r\n    return (performance.now() - this._start) / 1000\r\n  }\r\n\r\n  get iTimeDelta() {\r\n    return (performance.now() - this._lastFrameTime) / 1000\r\n  }\r\n\r\n  get iFrame() {\r\n    return this._totalFrames\r\n  }\r\n\r\n  get iFrameRate() {\r\n    return this._fps\r\n  }\r\n\r\n  get iDate() {\r\n    const date = new Date()\r\n\r\n    return [\r\n      date.getFullYear(), // the year (four digits)\r\n      date.getMonth(), // the month (from 0-11)\r\n      date.getDate(), // the day of the month (from 1-31)\r\n      date.getHours() * 60 * 60 + date.getMinutes() * 60 + date.getSeconds(),\r\n    ]\r\n  }\r\n\r\n  end() {\r\n    const now = performance.now()\r\n\r\n    this._fpsFrames++\r\n    this._totalFrames++\r\n\r\n    const fpsDelta = now - this._lastFPSTime\r\n\r\n    if (fpsDelta >= this.fpsRate) {\r\n      this._fps = (this._fpsFrames / fpsDelta) * 1000\r\n      this._lastFPSTime = now\r\n      this._fpsFrames = 0\r\n    }\r\n\r\n    this._lastFrameTime = now\r\n  }\r\n}\r\n","export default class Mouse {\r\n  constructor() {\r\n    this._x = 0\r\n    this._y = 0\r\n    this._z = -0\r\n    this._w = -0\r\n  }\r\n\r\n  click(x, y) {\r\n    this._x = x\r\n    this._y = y\r\n    this._z = x\r\n    this._w = y\r\n  }\r\n\r\n  move(x, y) {\r\n    this._x = x\r\n    this._y = y\r\n  }\r\n\r\n  release(x, y) {\r\n    this._x = x\r\n    this._y = y\r\n    this._z = -this.z\r\n    this._w = -this.w\r\n  }\r\n\r\n  get iMouse() {\r\n    return [this._x, this._y, this._z, this._w]\r\n  }\r\n}\r\n","const POS_X_COLOR = new Uint8Array([255, 0, 255, 255])\r\nconst NEG_X_COLOR = new Uint8Array([255, 0, 0, 255])\r\nconst POS_Y_COLOR = new Uint8Array([0, 255, 0, 255])\r\nconst NEG_Y_COLOR = new Uint8Array([0, 0, 255, 255])\r\nconst POS_Z_COLOR = new Uint8Array([255, 255, 255, 255])\r\nconst NEG_Z_COLOR = new Uint8Array([255, 255, 0, 255])\r\n\r\nconst setCubeFaceColor = (gl, face, color) => {\r\n  gl.texImage2D(face, 0, gl.RGBA8, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, color)\r\n}\r\n\r\nconst IMAGE_NUMBER_TO_ID = {\r\n  0: 'xPos',\r\n  1: 'xNeg',\r\n  2: 'yPos',\r\n  3: 'yNeg',\r\n  4: 'zPos',\r\n  5: 'zNeg',\r\n}\r\n\r\nexport default class TextureCube {\r\n  samplerType = 'samplerCube'\r\n  target = WebGL2RenderingContext.TEXTURE_CUBE_MAP\r\n  resolution = [0, 0, 0]\r\n  time = 0\r\n  loaded = false\r\n\r\n  constructor(gl, { src, sampler: { filter, wrap, vflip, srgb, internal } }) {\r\n    if (filter !== 'nearest' && filter !== 'linear' && filter !== 'mipmap') {\r\n      throw new Error(`Unexpected filter \"${filter}\" for TextureCube`)\r\n    }\r\n\r\n    if (wrap !== 'clamp') {\r\n      throw new Error(`Unexpected wrap \"${wrap}\" for TextureCube`)\r\n    }\r\n\r\n    if (vflip !== 'true' && vflip !== 'false') {\r\n      throw new Error(`Unexpected vflip \"${vflip}\" for TextureCube`)\r\n    }\r\n\r\n    if (srgb !== 'false') {\r\n      throw new Error(`Unexpected srgb \"${srgb}\" for TextureCube`)\r\n    }\r\n\r\n    if (internal !== 'byte') {\r\n      throw new Error(`Unexpected internal \"${internal}\" for TextureCube`)\r\n    }\r\n\r\n    this.gl = gl\r\n    this.id = gl.createTexture()\r\n    this.magFilter =\r\n      filter === 'nearest'\r\n        ? gl.NEAREST\r\n        : filter === 'linear'\r\n        ? gl.LINEAR\r\n        : filter === 'mipmap'\r\n        ? gl.LINEAR\r\n        : null\r\n    this.minFilter =\r\n      filter === 'nearest'\r\n        ? gl.NEAREST\r\n        : filter === 'linear'\r\n        ? gl.LINEAR\r\n        : filter === 'mipmap'\r\n        ? gl.LINEAR_MIPMAP_LINEAR\r\n        : null\r\n    this.vflip = vflip === 'true'\r\n    /*\r\n    NOT NEEDED -- Seem to be constant\r\n    this.srgb = srgb\r\n    this.internal = internal\r\n    */\r\n\r\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, this.id)\r\n\r\n    // Placeholder cube colors\r\n    setCubeFaceColor(gl, gl.TEXTURE_CUBE_MAP_POSITIVE_X, POS_X_COLOR)\r\n    setCubeFaceColor(gl, gl.TEXTURE_CUBE_MAP_NEGATIVE_X, NEG_X_COLOR)\r\n    setCubeFaceColor(gl, gl.TEXTURE_CUBE_MAP_POSITIVE_Y, POS_Y_COLOR)\r\n    setCubeFaceColor(gl, gl.TEXTURE_CUBE_MAP_NEGATIVE_Y, NEG_Y_COLOR)\r\n    setCubeFaceColor(gl, gl.TEXTURE_CUBE_MAP_POSITIVE_Z, POS_Z_COLOR)\r\n    setCubeFaceColor(gl, gl.TEXTURE_CUBE_MAP_NEGATIVE_Z, NEG_Z_COLOR)\r\n\r\n    // Load face images\r\n    let hasErrored = false\r\n    let loaded = 0\r\n    this.images = {}\r\n\r\n    for (let i = 0; i < 6; i++) {\r\n      const image = new Image()\r\n\r\n      const selfI = i\r\n\r\n      // eslint-disable-next-line no-loop-func\r\n      image.onload = () => {\r\n        if (hasErrored) return\r\n\r\n        loaded++\r\n\r\n        this.images[IMAGE_NUMBER_TO_ID[selfI]] = image\r\n\r\n        if (loaded === 6) {\r\n          this.initFromImages()\r\n\r\n          const images = Object.values(this.images)\r\n\r\n          this.resolution = [\r\n            Math.max(...images.map((img) => img.width)),\r\n            Math.max(...images.map((img) => img.height)),\r\n            0,\r\n          ]\r\n          this.loaded = true\r\n        }\r\n      }\r\n\r\n      // eslint-disable-next-line no-loop-func\r\n      image.onerror = () => {\r\n        if (hasErrored) return\r\n\r\n        hasErrored = true\r\n        image.src = ''\r\n        alert('Error loading TextureCube input')\r\n      }\r\n\r\n      const lastDotIndex = src.lastIndexOf('.')\r\n      image.src =\r\n        i === 0\r\n          ? src\r\n          : `${src.slice(0, lastDotIndex)}_${i}.${src.slice(lastDotIndex + 1)}`\r\n      // image.src = toShaderToyURL(src)\r\n    }\r\n  }\r\n\r\n  initFromImages() {\r\n    const gl = this.gl\r\n\r\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, this.id)\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, this.vflip)\r\n\r\n    /*\r\n    WHY NOT?\r\n\r\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\r\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE)\r\n    */\r\n\r\n    // gl.activeTexture(gl.TEXTURE0) -- WHY YES!?\r\n\r\n    gl.texImage2D(\r\n      gl.TEXTURE_CUBE_MAP_POSITIVE_X,\r\n      0,\r\n      gl.RGBA8,\r\n      gl.RGBA,\r\n      gl.UNSIGNED_BYTE,\r\n      this.images.xPos,\r\n    )\r\n    gl.texImage2D(\r\n      gl.TEXTURE_CUBE_MAP_NEGATIVE_X,\r\n      0,\r\n      gl.RGBA8,\r\n      gl.RGBA,\r\n      gl.UNSIGNED_BYTE,\r\n      this.images.xNeg,\r\n    )\r\n    gl.texImage2D(\r\n      gl.TEXTURE_CUBE_MAP_POSITIVE_Y,\r\n      0,\r\n      gl.RGBA8,\r\n      gl.RGBA,\r\n      gl.UNSIGNED_BYTE,\r\n      !this.vflip ? this.images.yPos : this.images.yNeg,\r\n    )\r\n    gl.texImage2D(\r\n      gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,\r\n      0,\r\n      gl.RGBA8,\r\n      gl.RGBA,\r\n      gl.UNSIGNED_BYTE,\r\n      !this.vflip ? this.images.yNeg : this.images.yPos,\r\n    )\r\n    gl.texImage2D(\r\n      gl.TEXTURE_CUBE_MAP_POSITIVE_Z,\r\n      0,\r\n      gl.RGBA8,\r\n      gl.RGBA,\r\n      gl.UNSIGNED_BYTE,\r\n      this.images.zPos,\r\n    )\r\n    gl.texImage2D(\r\n      gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,\r\n      0,\r\n      gl.RGBA8,\r\n      gl.RGBA,\r\n      gl.UNSIGNED_BYTE,\r\n      this.images.zNeg,\r\n    )\r\n\r\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MAG_FILTER, this.magFilter)\r\n    gl.texParameteri(gl.TEXTURE_CUBE_MAP, gl.TEXTURE_MIN_FILTER, this.minFilter)\r\n\r\n    if (this.minFilter === gl.LINEAR_MIPMAP_LINEAR) {\r\n      gl.generateMipmap(gl.TEXTURE_CUBE_MAP)\r\n    }\r\n\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false)\r\n    gl.bindTexture(gl.TEXTURE_CUBE_MAP, null)\r\n  }\r\n\r\n  update() {}\r\n}\r\n","export default class Texture2D {\r\n  samplerType = 'sampler2D'\r\n  target = WebGL2RenderingContext.TEXTURE_2D\r\n  resolution = [0, 0, 0]\r\n  time = 0\r\n  loaded = false\r\n\r\n  constructor(gl, { sampler: { filter, wrap, vflip, srgb, internal } }) {\r\n    if (filter !== 'nearest' && filter !== 'linear' && filter !== 'mipmap') {\r\n      throw new Error(`Unexpected filter \"${filter}\" for Texture2D`)\r\n    }\r\n\r\n    if (wrap !== 'clamp' && wrap !== 'repeat') {\r\n      throw new Error(`Unexpected wrap \"${wrap}\" for Texture2D`)\r\n    }\r\n\r\n    if (vflip !== 'true' && vflip !== 'false') {\r\n      throw new Error(`Unexpected vflip \"${vflip}\" for Texture2D`)\r\n    }\r\n\r\n    if (srgb !== 'false') {\r\n      throw new Error(`Unexpected srgb \"${srgb}\" for Texture2D`)\r\n    }\r\n\r\n    if (internal !== 'byte') {\r\n      throw new Error(`Unexpected internal \"${internal}\" for Texture2D`)\r\n    }\r\n\r\n    this.gl = gl\r\n    this.id = gl.createTexture()\r\n    this.magFilter =\r\n      filter === 'nearest'\r\n        ? gl.NEAREST\r\n        : filter === 'linear'\r\n        ? gl.LINEAR\r\n        : filter === 'mipmap'\r\n        ? gl.LINEAR\r\n        : null\r\n    this.minFilter =\r\n      filter === 'nearest'\r\n        ? gl.NEAREST\r\n        : filter === 'linear'\r\n        ? gl.LINEAR\r\n        : filter === 'mipmap'\r\n        ? gl.LINEAR_MIPMAP_LINEAR\r\n        : null\r\n    this.wrap =\r\n      wrap === 'clamp' ? gl.CLAMP_TO_EDGE : wrap === 'repeat' ? gl.REPEAT : null\r\n    this.vflip = vflip === 'true'\r\n    /*\r\n    NOT NEEDED -- Seem to be constant\r\n    this.srgb = srgb\r\n    this.internal = internal\r\n    */\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, this.id)\r\n\r\n    // Placeholder magenta image\r\n    gl.texImage2D(\r\n      gl.TEXTURE_2D,\r\n      0,\r\n      gl.RGBA8,\r\n      1,\r\n      1,\r\n      0,\r\n      gl.RGBA,\r\n      gl.UNSIGNED_BYTE,\r\n      new Uint8Array([255, 0, 255, 255]),\r\n    )\r\n  }\r\n\r\n  initFrom(input) {\r\n    const gl = this.gl\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, this.id)\r\n\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, this.vflip)\r\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false)\r\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE)\r\n\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA8, gl.RGBA, gl.UNSIGNED_BYTE, input)\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, this.wrap)\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, this.wrap)\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, this.magFilter)\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, this.minFilter)\r\n\r\n    if (this.minFilter === gl.LINEAR_MIPMAP_LINEAR) {\r\n      gl.generateMipmap(gl.TEXTURE_2D)\r\n    }\r\n\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false)\r\n    gl.bindTexture(gl.TEXTURE_2D, null)\r\n  }\r\n\r\n  updateFrom(input) {\r\n    const gl = this.gl\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, this.id)\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, this.vflip)\r\n\r\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA8, gl.RGBA, gl.UNSIGNED_BYTE, input)\r\n\r\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false)\r\n    gl.bindTexture(gl.TEXTURE_2D, null)\r\n  }\r\n\r\n  update() {}\r\n}\r\n","import Texture2D from './Texture2D'\r\n\r\nexport default class Texture2DImage extends Texture2D {\r\n  constructor(gl, input) {\r\n    super(gl, input)\r\n\r\n    this.src = input.src\r\n    this.image = new Image()\r\n\r\n    this.image.onload = () => {\r\n      this.initFrom(this.image)\r\n      this.resolution = [this.image.width, this.image.height]\r\n      this.loaded = true\r\n    }\r\n\r\n    this.image.onerror = () => {\r\n      alert('Error loading input')\r\n    }\r\n\r\n    // image.src = toShaderToyURL(src)\r\n    this.image.src = input.src\r\n  }\r\n}\r\n","import Texture2D from './Texture2D'\r\n\r\nexport default class Texture2DVideo extends Texture2D {\r\n  constructor(gl, input) {\r\n    super(gl, input)\r\n\r\n    this.src = input.src\r\n\r\n    this.video = document.createElement('video')\r\n    this.video.autoplay = true\r\n    this.video.muted = true\r\n    this.video.loop = true\r\n\r\n    let playing = false\r\n    let timeupdate = false\r\n\r\n    this.video.addEventListener(\r\n      'playing',\r\n      () => {\r\n        playing = true\r\n        checkReady()\r\n      },\r\n      true,\r\n    )\r\n\r\n    this.video.addEventListener(\r\n      'timeupdate',\r\n      () => {\r\n        timeupdate = true\r\n        checkReady()\r\n      },\r\n      true,\r\n    )\r\n\r\n    this.video.onerror = () => {\r\n      alert('Error loading input')\r\n    }\r\n\r\n    // image.src = toShaderToyURL(src)\r\n    this.video.src = input.src\r\n    this.video.play()\r\n\r\n    const checkReady = () => {\r\n      if (playing && timeupdate) {\r\n        this.initFrom(this.video)\r\n        this.resolution = [this.image.videoWidth, this.image.videoHeight]\r\n\r\n        this.loaded = true\r\n      }\r\n    }\r\n  }\r\n\r\n  update() {\r\n    if (this.loaded) {\r\n      this.updateFrom(this.video)\r\n    }\r\n  }\r\n}\r\n","import { initShaderProgram } from './shader'\r\nimport { initQuad } from './quad'\r\nimport { mat4 } from 'gl-matrix'\r\nimport Timing from '../shadertoy/Timing'\r\nimport Mouse from '../shadertoy/Mouse'\r\nimport TextureCube from './TextureCube'\r\nimport Texture2DImage from './Texture2DImage'\r\nimport Texture2DVideo from './Texture2DVideo'\r\n\r\nconst FPS_RATE = 500\r\n\r\nexport const createDrawScene = (renderpass, forceLowEnd) => (gl) => {\r\n  if (renderpass.length > 1) {\r\n    throw new Error('Multipass not supported')\r\n  }\r\n\r\n  const inputs = renderpass[0].inputs.map((input, i) => {\r\n    if (\r\n      input.ctype !== 'texture' &&\r\n      input.ctype !== 'video' &&\r\n      input.ctype !== 'cubemap'\r\n    ) {\r\n      throw new Error(`Unexpected ctype === ${input.ctype}`)\r\n    }\r\n\r\n    if (input.channel < 0 || input.channel > 3) {\r\n      throw new Error(`Unexpected channel === ${input.channel}`)\r\n    }\r\n\r\n    const usedChannels = renderpass[0].inputs\r\n      .slice(0, i)\r\n      .map((input) => input.channel)\r\n\r\n    if (usedChannels.includes(input.channel)) {\r\n      throw new Error(`Repeated channel ${input.channel} in input ${i}`)\r\n    }\r\n\r\n    return {\r\n      ...input,\r\n      texture:\r\n        input.ctype === 'texture'\r\n          ? new Texture2DImage(gl, input)\r\n          : input.ctype === 'video'\r\n          ? new Texture2DVideo(gl, input)\r\n          : input.ctype === 'cubemap'\r\n          ? new TextureCube(gl, input)\r\n          : null,\r\n    }\r\n  })\r\n\r\n  const code = renderpass[0].code\r\n\r\n  const shaderProgram = initShaderProgram(gl, inputs, code, forceLowEnd)\r\n  const quad = initQuad(gl)\r\n\r\n  const timing = new Timing(FPS_RATE)\r\n  const mouse = new Mouse()\r\n\r\n  return (time, frame, refSpace) => {\r\n    timing.start()\r\n\r\n    if (timing.iFrame % 60 === 0) {\r\n      console.log(time, frame, refSpace)\r\n    }\r\n\r\n    const pose = frame.getViewerPose(refSpace)\r\n\r\n    if (pose) {\r\n      const session = frame.session\r\n      const glLayer = session.renderState.baseLayer\r\n\r\n      gl.bindFramebuffer(gl.FRAMEBUFFER, glLayer.framebuffer)\r\n\r\n      for (let view of pose.views) {\r\n        const viewport = glLayer.getViewport(view)\r\n\r\n        gl.viewport(viewport.x, viewport.y, viewport.width, viewport.height)\r\n\r\n        const invViewMatrix = view.transform.matrix\r\n        const invProjMatrix = mat4.invert(mat4.create(), view.projectionMatrix)\r\n\r\n        // Draw quad\r\n        gl.useProgram(shaderProgram.program)\r\n\r\n        quad.bind(shaderProgram.aVertexPosition)\r\n\r\n        gl.uniformMatrix4fv(shaderProgram.uInvViewMatrix, false, invViewMatrix)\r\n        gl.uniformMatrix4fv(shaderProgram.uInvProjMatrix, false, invProjMatrix)\r\n        gl.uniform4fv(shaderProgram.uViewport, [\r\n          viewport.x,\r\n          viewport.y,\r\n          viewport.width,\r\n          viewport.height,\r\n        ])\r\n\r\n        // ShaderToy inputs\r\n        gl.uniform3f(\r\n          shaderProgram.iResolution,\r\n          viewport.width,\r\n          viewport.height,\r\n          // Apparently z = pixel aspect ratio\r\n          // https://twitter.com/iquilezles/status/633113177568313344\r\n          // Always 1 on ShaderToy source\r\n          1,\r\n        )\r\n        gl.uniform1f(shaderProgram.iTime, timing.iTime)\r\n        gl.uniform4fv(shaderProgram.iMouse, mouse.iMouse)\r\n        gl.uniform4fv(shaderProgram.iDate, timing.iDate)\r\n        gl.uniform1i(shaderProgram.iFrame, timing.iFrame)\r\n        gl.uniform1f(shaderProgram.iTimeDelta, timing.iTimeDelta)\r\n        gl.uniform1f(shaderProgram.iFrameRate, timing.iFrameRate)\r\n\r\n        const iChannelTime = [0, 0, 0, 0]\r\n        // prettier-ignore\r\n        const iChannelResolution = [\r\n          0, 0, 0,\r\n          0, 0, 0,\r\n          0, 0, 0,\r\n          0, 0, 0,\r\n        ]\r\n\r\n        for (const input of inputs) {\r\n          input.texture.update()\r\n\r\n          const i = input.channel\r\n\r\n          const loaded = input.texture.loaded\r\n          const resolution = input.texture.resolution\r\n          const time = input.texture.time\r\n\r\n          gl.activeTexture(gl[`TEXTURE${i}`])\r\n          gl.bindTexture(input.texture.target, input.texture.id)\r\n          gl.uniform1i(shaderProgram.iChannel[i], i)\r\n          gl.uniform1i(shaderProgram.iCh[i].sampler, i)\r\n          gl.uniform3fv(shaderProgram.iCh[i].size, resolution)\r\n          gl.uniform1f(shaderProgram.iCh[i].time, time)\r\n          gl.uniform1i(shaderProgram.iCh[i].loaded, loaded ? 1 : 0)\r\n\r\n          if (loaded) {\r\n            iChannelResolution[3 * i + 0] = resolution[0]\r\n            iChannelResolution[3 * i + 1] = resolution[1]\r\n            iChannelResolution[3 * i + 2] = resolution[2]\r\n            iChannelTime[i] = time\r\n          }\r\n        }\r\n\r\n        gl.uniform3fv(shaderProgram.iChannelResolution, iChannelResolution)\r\n        gl.uniform1fv(shaderProgram.iChannelTime, iChannelTime)\r\n\r\n        quad.draw()\r\n      }\r\n    }\r\n\r\n    timing.end()\r\n  }\r\n}\r\n","import { useEffect, useMemo } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Preview from './Preview'\r\nimport { createDrawScene } from '../gl/scene'\r\nimport { useXRSession } from '../hooks/useXRSession'\r\nimport styles from './ViewerButton.module.scss'\r\n\r\nconst ViewerButton = ({ id, shader, forceLowEnd }) => {\r\n  const myCreateDrawScene = useMemo(\r\n    () =>\r\n      shader.renderpass\r\n        ? createDrawScene(shader.renderpass, forceLowEnd)\r\n        : null,\r\n    [shader.renderpass, forceLowEnd],\r\n  )\r\n\r\n  const {\r\n    isAvailable,\r\n    isSupported,\r\n    isStarting,\r\n    isRunning,\r\n    start,\r\n    stop,\r\n  } = useXRSession(myCreateDrawScene)\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key === 'Escape') {\r\n        stop()\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', handleKeyDown)\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleKeyDown)\r\n    }\r\n  }, [stop])\r\n\r\n  return (\r\n    <Preview\r\n      id={id}\r\n      views={shader.info.viewed}\r\n      likes={shader.info.likes}\r\n      message={\r\n        !isAvailable\r\n          ? 'WebXR is not available'\r\n          : !isSupported\r\n          ? 'WebXR Immersive VR is not supported'\r\n          : undefined\r\n      }\r\n      className={styles.ViewerButton}\r\n      action={\r\n        !isAvailable || !isSupported\r\n          ? Preview.ACTIONS.ERROR\r\n          : isStarting\r\n          ? Preview.ACTIONS.SPIN\r\n          : !isRunning\r\n          ? Preview.ACTIONS.PLAY\r\n          : Preview.ACTIONS.STOP\r\n      }\r\n      onClick={\r\n        !isAvailable || !isSupported\r\n          ? undefined\r\n          : isStarting\r\n          ? undefined\r\n          : !isRunning\r\n          ? start\r\n          : stop\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nViewerButton.defaultProps = {\r\n  forceLowEnd: false,\r\n}\r\n\r\nViewerButton.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  shader: PropTypes.object.isRequired,\r\n  forceLowEnd: PropTypes.bool,\r\n}\r\n\r\nexport default ViewerButton\r\n","import { toShaderToyURL } from './misc'\r\n\r\nexport function bbc2html(content, allowMultimedia) {\r\n  //content = content.replace(new RegExp('\\r?\\n','g'), '<br />');\r\n\r\n  // Prevent JS injection\r\n  content = content.replace(\r\n    /(\\[url=)javascript:?(.*?)(\\])(.*?)(\\[\\/url\\])/gi,\r\n    '',\r\n  )\r\n  content = content.replace(/(\\[url\\])javascript:?(.*?)(\\[\\/url\\])/gi, '')\r\n  content = content.replace(/(\\[img\\])javascript:?(.*?)(\\[\\/img\\])/gi, '')\r\n\r\n  // Links\r\n  content = content.replace(\r\n    /(\\[url=)(.*?)(\\])(.*?)(\\[\\/url\\])/gi,\r\n    (_, __, g2, ___, g4) =>\r\n      `<a href=\"${toShaderToyURL(\r\n        g2,\r\n      )}\" class=\"regular\" target=\"_blank\">${g4}</a>`,\r\n  )\r\n  content = content.replace(\r\n    /(\\[url\\])(.*?)(\\[\\/url\\])/gi,\r\n    (_, __, g2) =>\r\n      `<a href=\"${toShaderToyURL(\r\n        g2,\r\n      )}\" class=\"regular\" target=\"_blank\">${g2}</a>`,\r\n  )\r\n\r\n  // Emoticons\r\n  content = content.replace(\r\n    /(:\\))/g,\r\n    '<img src=\"https://www.shadertoy.com/img/emoticonHappy.png\">',\r\n  )\r\n  content = content.replace(\r\n    /(:\\()/g,\r\n    '<img src=\"https://www.shadertoy.com/img/emoticonSad.png\">',\r\n  )\r\n  content = content.replace(\r\n    /(:D)/g,\r\n    '<img src=\"https://www.shadertoy.com/img/emoticonLaugh.png\">',\r\n  )\r\n  content = content.replace(\r\n    /(:love:)/gi,\r\n    '<img src=\"https://www.shadertoy.com/img/emoticonLove.png\">',\r\n  )\r\n  content = content.replace(\r\n    /(:octopus:)/gi,\r\n    '<img src=\"https://www.shadertoy.com/img/emoticonOctopus.png\">',\r\n  )\r\n  content = content.replace(\r\n    /(:octopusballoon:)/gi,\r\n    '<img src=\"https://www.shadertoy.com/img/emoticonOctopusBalloon.png\">',\r\n  )\r\n\r\n  // Unicode\r\n  content = content.replace(/(:alpha:)/gi, '&#945;')\r\n  content = content.replace(/(:beta:)/gi, '&#946;')\r\n  content = content.replace(/(:delta:)/gi, '&#9169;')\r\n  content = content.replace(/(:epsilon:)/gi, '&#949;')\r\n  content = content.replace(/(:nabla:)/gi, '&#8711;')\r\n  content = content.replace(/(:square:)/gi, '&#178;')\r\n  content = content.replace(/(:sube:)/gi, '&#179;')\r\n  content = content.replace(/(:limit:)/gi, '&#8784;')\r\n\r\n  // Text formatting\r\n  content = content.replace(\r\n    /(\\[b\\])([.\\s\\S]*?)(\\[\\/b\\])/gi,\r\n    '<strong>$2</strong>',\r\n  )\r\n  content = content.replace(/(\\[i\\])([.\\s\\S]*?)(\\[\\/i\\])/gi, '<em>$2</em>')\r\n  content = content.replace(/(\\[u\\])([.\\s\\S]*?)(\\[\\/u\\])/gi, '<u>$2</u>')\r\n  content = content.replace(/(\\[ul\\])([.\\s\\S]*?)(\\[\\/ul\\])/gi, '<ul>$2</ul>')\r\n  content = content.replace(/(\\[li\\])([.\\s\\S]*?)(\\[\\/li\\])/gi, '<li>$2</li>')\r\n  content = content.replace(\r\n    /(\\[code\\])([.\\s\\S]*?)(\\[\\/code\\])/gi,\r\n    '<pre>$2</pre>',\r\n  )\r\n\r\n  // Multimedia\r\n  if (allowMultimedia) {\r\n    content = content.replace(/(\\[img\\])(.*?)(\\[\\/img\\])/gi, (_, __, g2) => {\r\n      const url = toShaderToyURL(g2)\r\n      return `<a href=\"${url}\"><img src=\"${url}\" style=\"max-width:100%;\"/></a>`\r\n    })\r\n    content = content.replace(\r\n      /(\\[video\\])(?:http|https|)(?::\\/\\/|)(?:www.|)(?:youtu\\.be\\/|youtube\\.com(?:\\/embed\\/|\\/v\\/|\\/watch\\?v=|\\/ytscreeningroom\\?v=|\\/feeds\\/api\\/videos\\/|\\/user\\S*[^\\w\\-\\s]|\\S*[^\\w\\-\\s]))([\\w-]{11})(.*?)(\\[\\/video\\])/gi,\r\n      '<iframe width=\"100%\" height=\"360\" src=\"https://www.youtube.com/embed/$2?hd=1\" frameborder=\"0\" allowfullscreen></iframe>',\r\n    )\r\n  }\r\n\r\n  return content\r\n}\r\n","import PropTypes from 'prop-types'\r\nimport { bbc2html } from '../shadertoy/bbcode'\r\nimport styles from './BBCode.module.scss'\r\n\r\nconst BBCode = ({ string, allowMultimedia }) => (\r\n  <div\r\n    className={styles.BBCode}\r\n    dangerouslySetInnerHTML={{ __html: bbc2html(string, allowMultimedia) }}\r\n  />\r\n)\r\n\r\nBBCode.defaultProps = {\r\n  allowMultimedia: false,\r\n}\r\n\r\nBBCode.propTypes = {\r\n  string: PropTypes.string.isRequired,\r\n  allowMultimedia: PropTypes.bool,\r\n}\r\n\r\nexport default BBCode\r\n","import { useCallback, useState } from 'react'\r\nimport { generatePath, Link, useParams } from 'react-router-dom'\r\nimport { Helmet } from 'react-helmet-async'\r\nimport { useQueryShader } from '../hooks/useQueryShader'\r\nimport {\r\n  BROWSER_PATH,\r\n  SHADERTOY_PREVIEW_PATH,\r\n  SHADERTOY_USER_PATH,\r\n  SHADERTOY_VIEW_PATH,\r\n  VIEW_PATH,\r\n} from '../paths'\r\nimport styles from './Viewer.module.scss'\r\nimport { getFlags } from '../shadertoy/flags'\r\nimport ViewerButton from './ViewerButton'\r\nimport useScrollToTopOnMount from '../hooks/useScrollToTopOnMount'\r\nimport BBCode from './BBCode'\r\nimport { getIsLowEnd } from '../shadertoy/misc'\r\nimport BigIcon from './BigIcon'\r\nimport { ReactComponent as Spinner } from '../icons/spinner.svg'\r\nimport { ReactComponent as ExclamationIcon } from '../icons/exclamation.svg'\r\nimport GlobalSpinner from './GlobalSpinner'\r\n\r\nconst Viewer = () => {\r\n  useScrollToTopOnMount()\r\n\r\n  const { id } = useParams()\r\n  const {\r\n    isLoading,\r\n    isFetching,\r\n    isError,\r\n    error,\r\n    data,\r\n    refetch,\r\n  } = useQueryShader(id)\r\n  const [forceLowEnd, setForceLowEnd] = useState(getIsLowEnd())\r\n\r\n  const handleCheckForceLowEnd = useCallback((e) => {\r\n    setForceLowEnd(!!e.target.checked)\r\n  }, [])\r\n\r\n  const shaderToyPreviewPath = generatePath(SHADERTOY_PREVIEW_PATH, { id })\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <>\r\n        <Helmet>\r\n          <title>{id} - XRderToy Viewer</title>\r\n          <meta property=\"og:title\" content={`${id} - XRderToy Viewer`} />\r\n          <meta property=\"og:image\" content={shaderToyPreviewPath} />\r\n        </Helmet>\r\n\r\n        <BigIcon Icon={Spinner} isSmall>\r\n          <h1>Loading shader {id}...</h1>\r\n        </BigIcon>\r\n      </>\r\n    )\r\n  }\r\n\r\n  if (isError || data.Error) {\r\n    const errorMessage = error?.message || data?.Error\r\n\r\n    return (\r\n      <BigIcon Icon={ExclamationIcon} isSmall>\r\n        <Helmet>\r\n          <title>{id} - XRderToy Viewer</title>\r\n          <meta property=\"og:title\" content={`${id} - XRderToy Viewer`} />\r\n          <meta property=\"og:image\" content={shaderToyPreviewPath} />\r\n        </Helmet>\r\n        <h1>Error loading shader {id}</h1>\r\n        {errorMessage ? <p>{errorMessage}</p> : null}\r\n        <button onClick={refetch}>Retry</button>\r\n      </BigIcon>\r\n    )\r\n  }\r\n\r\n  const { info } = data?.Shader\r\n\r\n  const viewPath = generatePath(VIEW_PATH, { id })\r\n  const shaderToyViewPath = generatePath(SHADERTOY_VIEW_PATH, { id })\r\n  const shaderToyProfilePath = info.username\r\n    ? generatePath(SHADERTOY_USER_PATH, { username: info.username })\r\n    : null\r\n\r\n  const date = info.date ? new Date(info.date * 1000) : null\r\n  const dateText = `${date.getFullYear()}-${(date.getMonth() + 1)\r\n    .toString()\r\n    .padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')}`\r\n  const timeText = `${date\r\n    .getHours()\r\n    .toString()\r\n    .padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`\r\n  const dateTimeText = `${dateText} ${timeText}`\r\n\r\n  const flags = getFlags(info.flags)\r\n\r\n  return (\r\n    <div className={styles.Viewer}>\r\n      <Helmet>\r\n        <title>\r\n          {info.name} by {info.username} - XRderToy Viewer\r\n        </title>\r\n        <meta\r\n          property=\"og:title\"\r\n          content={`${info.name} by ${info.username} - XRderToy Viewer`}\r\n        />\r\n        <meta property=\"og:image\" content={shaderToyPreviewPath} />\r\n      </Helmet>\r\n\r\n      <div className={styles.main}>\r\n        <header className={styles.header}>\r\n          <h2>\r\n            <Link to={viewPath}>{info.name}</Link>{' '}\r\n            <small>\r\n              by{' '}\r\n              <Link to={`${BROWSER_PATH}?text=${info.username}`}>\r\n                {info.username}\r\n              </Link>\r\n            </small>\r\n          </h2>\r\n        </header>\r\n\r\n        <ViewerButton id={id} shader={data?.Shader} forceLowEnd={forceLowEnd} />\r\n\r\n        <label title=\"Some shaders use this flag to enable lighter rendering.\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={forceLowEnd}\r\n            onChange={handleCheckForceLowEnd}\r\n            disabled={getIsLowEnd()}\r\n          />{' '}\r\n          <span className={styles.hasTitle}>Performance flag</span>\r\n        </label>\r\n      </div>\r\n\r\n      <div className={styles.info}>\r\n        <ul>\r\n          <li>\r\n            <span className={styles.hasTitle} title={dateTimeText}>\r\n              {dateText}\r\n            </span>\r\n          </li>\r\n          <li>\r\n            On ShaderToy: <a href={shaderToyViewPath}>{info.name}</a>,{' '}\r\n            <a href={shaderToyProfilePath}>{info.username}</a>\r\n          </li>\r\n          <li>\r\n            Tags:{' '}\r\n            <ul className={styles.commaList}>\r\n              {info.tags.map((tag, i) => (\r\n                <li key={tag}>\r\n                  <Link to={`${BROWSER_PATH}?text=${tag}`}>{tag}</Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </li>\r\n          <li>\r\n            Flags:{' '}\r\n            <ul className={styles.commaList}>\r\n              {flags.vr && (\r\n                <li>\r\n                  <Link to={BROWSER_PATH}>VR</Link>\r\n                </li>\r\n              )}\r\n              {flags.multipass && (\r\n                <li>\r\n                  <Link to={`${BROWSER_PATH}?multipass=1`}>Multipass</Link>\r\n                </li>\r\n              )}\r\n              {flags.gpuSound && (\r\n                <li>\r\n                  <Link to={`${BROWSER_PATH}?gpusound=1`}>GPU Sound</Link>\r\n                </li>\r\n              )}\r\n              {flags.microphone && (\r\n                <li>\r\n                  <Link to={`${BROWSER_PATH}?microphone=1`}>Microphone</Link>\r\n                </li>\r\n              )}\r\n              {flags.soundCloud && (\r\n                <li>\r\n                  <Link to={`${BROWSER_PATH}?soundcloud=1`}>SoundCloud</Link>\r\n                </li>\r\n              )}\r\n              {flags.webcam && (\r\n                <li>\r\n                  <Link to={`${BROWSER_PATH}?webcam=1`}>Webcam</Link>\r\n                </li>\r\n              )}\r\n              {flags.keyboard && (\r\n                <li>\r\n                  <Link to={`${BROWSER_PATH}?keyboard=1`}>Keyboard</Link>\r\n                </li>\r\n              )}\r\n            </ul>\r\n          </li>\r\n          <li>\r\n            Description: <BBCode string={info.description} />\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div className={styles.side}>\r\n        <details>\r\n          <summary>Debug</summary>\r\n          <pre>{JSON.stringify(data, null, 4)}</pre>\r\n        </details>\r\n      </div>\r\n\r\n      <GlobalSpinner isHidden={!isFetching || isLoading} />\r\n    </div>\r\n  )\r\n}\r\n\r\nViewer.propTypes = {}\r\n\r\nexport default Viewer\r\n","export const getFlags = (bits) => ({\r\n  vr: !!(bits & 0b0000001),\r\n  webcam: !!(bits & 0b0000010),\r\n  microphone: !!(bits & 0b0000100),\r\n  gpuSound: !!(bits & 0b0001000),\r\n  keyboard: !!(bits & 0b0010000),\r\n  multipass: !!(bits & 0b0100000),\r\n  soundCloud: !!(bits & 0b1000000),\r\n})\r\n","import { Helmet } from 'react-helmet-async'\r\nimport { Link } from 'react-router-dom'\r\nimport useScrollToTopOnMount from '../hooks/useScrollToTopOnMount'\r\nimport { BROWSER_PATH } from '../paths'\r\nimport { ReactComponent as ExclamationIcon } from '../icons/exclamation.svg'\r\nimport BigIcon from './BigIcon'\r\n\r\nconst Error404 = () => {\r\n  useScrollToTopOnMount()\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Not found - XRderToy Viewer</title>\r\n      </Helmet>\r\n\r\n      <BigIcon Icon={ExclamationIcon}>\r\n        <h1>Error 404</h1>\r\n        <Link to={BROWSER_PATH}>Go back to browser</Link>\r\n      </BigIcon>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Error404\r\n","import { Link, Route, Switch } from 'react-router-dom'\r\nimport { Helmet } from 'react-helmet-async'\r\nimport {\r\n  ALVARO_ROOT_PATH,\r\n  ROOT_PATH,\r\n  SHADERTOY_ROOT_PATH,\r\n  VIEW_PATH,\r\n} from '../paths'\r\nimport Browser from './Browser'\r\nimport Viewer from './Viewer'\r\nimport Error404 from './Error404'\r\nimport styles from './App.module.scss'\r\n\r\nconst App = () => (\r\n  <>\r\n    <Helmet>\r\n      <title>XRderToy Viewer</title>\r\n      <meta property=\"og:title\" content=\"XRderToy Viewer\" />\r\n      <meta\r\n        property=\"og:image\"\r\n        content=\"https://www.shadertoy.com/img/logo.png\"\r\n      />\r\n    </Helmet>\r\n\r\n    <div className={styles.App}>\r\n      <header className={styles.header}>\r\n        <h1>\r\n          <Link to={ROOT_PATH}>XRderToy Viewer</Link>\r\n        </h1>\r\n      </header>\r\n\r\n      <main className={styles.main}>\r\n        <Switch>\r\n          <Route exact path={ROOT_PATH}>\r\n            <Browser />\r\n          </Route>\r\n\r\n          <Route exact path={VIEW_PATH}>\r\n            <Viewer />\r\n          </Route>\r\n\r\n          <Route>\r\n            <Error404 />\r\n          </Route>\r\n        </Switch>\r\n      </main>\r\n\r\n      <footer className={styles.footer}>\r\n        <ul>\r\n          <li>\r\n            Made by <a href={ALVARO_ROOT_PATH}>Álvaro Cuesta</a>\r\n          </li>\r\n          <li>\r\n            Powered by <a href={SHADERTOY_ROOT_PATH}>ShaderToy.com</a> API\r\n          </li>\r\n        </ul>\r\n      </footer>\r\n    </div>\r\n  </>\r\n)\r\n\r\nApp.propTypes = {}\r\n\r\nexport default App\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { QueryCache, ReactQueryCacheProvider } from 'react-query'\nimport { Router, Route } from 'react-router-dom'\nimport { QueryParamProvider } from 'use-query-params'\nimport { HelmetProvider } from 'react-helmet-async'\nimport './index.css'\nimport App from './components/App'\nimport reportWebVitals from './reportWebVitals'\nimport { createBrowserHistory } from 'history'\n\n// Hack to prevent pushing the same URL again and again on Link click\n// See https://github.com/ReactTraining/history/issues/470#issuecomment-445217562\nconst customHistory = createBrowserHistory({ basename: process.env.BASENAME })\nconst prevHistoryPush = customHistory.push\nlet lastLocation = customHistory.location\n\ncustomHistory.listen((location) => {\n  lastLocation = location\n})\n\ncustomHistory.push = (pathname, state = {}) => {\n  if (\n    lastLocation === null ||\n    pathname !==\n      lastLocation.pathname + lastLocation.search + lastLocation.hash ||\n    JSON.stringify(state) !== JSON.stringify(lastLocation.state || {})\n  ) {\n    prevHistoryPush(pathname, state)\n  }\n}\n\nconst queryCache = new QueryCache()\n\nReactDOM.render(\n  <React.StrictMode>\n    <HelmetProvider>\n      <ReactQueryCacheProvider queryCache={queryCache}>\n        <Router history={customHistory}>\n          <QueryParamProvider ReactRouterRoute={Route}>\n            <App />\n          </QueryParamProvider>\n        </Router>\n      </ReactQueryCacheProvider>\n    </HelmetProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}